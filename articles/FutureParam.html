<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A BiocParallelParam class using Futures â€¢ BiocParallel.FutureParam</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="A BiocParallelParam class using Futures">
<meta property="og:description" content="BiocParallel.FutureParam">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-SB3EQSD9FR"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SB3EQSD9FR');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">BiocParallel.FutureParam</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.1-9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/FutureParam.html">A BiocParallelParam class using Futures</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://www.futureverse.org/">
    <span class="fas fa-fast-backward"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://BiocParallel.FutureParam.futureverse.org">BiocParallel.FutureParam</a>
    </li>
    <li>
      <a href="https://doFuture.futureverse.org">doFuture</a>
    </li>
    <li>
      <a href="https://furrr.futureverse.org">furrr</a>
    </li>
    <li>
      <a href="https://future.futureverse.org">future</a>
    </li>
    <li>
      <a href="https://future.apply.futureverse.org">future.apply</a>
    </li>
    <li>
      <a href="https://future.batchtools.futureverse.org">future.batchtools</a>
    </li>
    <li>
      <a href="https://future.callr.futureverse.org">future.callr</a>
    </li>
    <li>
      <a href="https://future.tests.futureverse.org">future.tests</a>
    </li>
    <li>
      <a href="https://globals.futureverse.org">globals</a>
    </li>
    <li>
      <a href="https://listenv.futureverse.org">listenv</a>
    </li>
    <li>
      <a href="https://parallelly.futureverse.org">parallelly</a>
    </li>
    <li>
      <a href="https://progressr.futureverse.org">progressr</a>
    </li>
    <li>
      <a href="https://future.mapreduce.futureverse.org">future.mapreduce (experimental)</a>
    </li>
    <li>
      <a href="https://marshal.futureverse.org">marshal (experimental)</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://cloud.r-project.org/package=BiocParallel.FutureParam">
    <span class="fab fa-r-project"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/HenrikBengtsson/BiocParallel.FutureParam/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>A BiocParallelParam class using Futures</h1>
                        <h4 class="author">Henrik Bengtsson</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/HenrikBengtsson/BiocParallel.FutureParam/blob/master/vignettes/FutureParam.md.rsp"><code>vignettes/FutureParam.md.rsp</code></a></small>
      <div class="hidden name"><code>FutureParam.md.rsp</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>The <a href="https://cran.r-project.org/package=future">future</a> package provides a generic API for using futures in R. A future is a simple yet powerful mechanism to evaluate an R expression and retrieve its value at some point in time. Futures can be resolved in many different ways depending on which strategy is used. There are various types of synchronous and asynchronous futures to choose from in the <a href="https://cran.r-project.org/package=future">future</a> package. Additional futures are implemented in other packages. For instance, the <a href="https://cran.r-project.org/package=future.batchtools">future.batchtools</a> package provides futures for <em>any</em> type of backend that the <a href="https://cran.r-project.org/package=batchtools">batchtools</a> package supports. For an introduction to futures in R, please consult the vignettes of the <a href="https://cran.r-project.org/package=future">future</a> package.</p>
<p>The <a href="https://github.com/HenrikBengtsson/BiocParallel.FutureParam">BiocParallel.FutureParam</a> package provides FutureParam, a BiocParallelParam class, for the <a href="https://bioconductor.org/packages/release/bioc/html/BiocParallel.html">BiocParallel</a> package that works with <em>any</em> type of future. The BiocParallel.FutureParam package is cross platform just as the future package.</p>
<p>Below is an example showing how to use FutureParam with <em>multicore</em> futures. A multicore future will be evaluated in parallel using forked workers, which is not supported on MS Windows when it will fall back to sequential processing.</p>
<div class="sourceCode"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://BiocParallel.FutureParam.futureverse.org">"BiocParallel.FutureParam"</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/BiocParallel/man/register.html">register</a></span><span class="op">(</span><span class="fu"><a href="../reference/FutureParam.html">FutureParam</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="fu">plan</span><span class="op">(</span><span class="va">multicore</span><span class="op">)</span>

<span class="va">mu</span> <span class="op">&lt;-</span> <span class="fl">1.0</span>
<span class="va">sigma</span> <span class="op">&lt;-</span> <span class="fl">2.0</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/BiocParallel/man/bplapply.html">bplapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, mu <span class="op">=</span> <span class="va">mu</span>, sigma <span class="op">=</span> <span class="va">sigma</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span>, <span class="va">mu</span>, <span class="va">sigma</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="va">i</span>, mean <span class="op">=</span> <span class="va">mu</span>, sd <span class="op">=</span> <span class="va">sigma</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span></code></pre></div>
</div>
<div id="futureparam-replaces-existing-biocparallelparam-classes" class="section level2">
<h2 class="hasAnchor">
<a href="#futureparam-replaces-existing-biocparallelparam-classes" class="anchor"></a>FutureParam replaces existing BiocParallelParam classes</h2>
<p>Due to the generic nature of futures, the FutureParam class provides the same functionality as many of the existing BiocParallelParam classes, e.g. SerialParam, SnowParam, MulticoreParam, BatchtoolsParam and DoparParam. In addition, it provides supports for additional backends that are not yet implemented in <a href="https://bioconductor.org/packages/release/bioc/html/BiocParallel.html">BiocParallel</a>, e.g. <a href="https://cran.r-project.org/package=callr">callr</a> and <a href="https://cran.r-project.org/package=batchtools">batchtools</a>.</p>
<table class="table">
<tr>
<th>
BiocParallel usage
</th>
<th>
BiocParallel.FutureParam alternative
</th>
</tr>
<tr style="vertical-align: center;">
<td>
<pre><code class="r"><a href="https://github.com/Bioconductor/BiocParallel">library("BiocParallel")
register(SerialParam())

</a></code></pre>
</td>
<td>
<pre><code class="r"><a href="https://BiocParallel.FutureParam.futureverse.org">library("BiocParallel.FutureParam")
register(FutureParam())
plan(sequential)
</a></code></pre>
</td>
</tr>
<tr style="vertical-align: center;">
<td>
<pre><code class="r"><a href="https://github.com/Bioconductor/BiocParallel">library("BiocParallel")
register(MulticoreParam())

</a></code></pre>
</td>
<td>
<pre><code class="r"><a href="https://BiocParallel.FutureParam.futureverse.org">library("BiocParallel.FutureParam")
register(FutureParam())
plan(multicore)
</a></code></pre>
</td>
</tr>
<tr style="vertical-align: center;">
<td>
<pre><code class="r"><a href="https://github.com/Bioconductor/BiocParallel">library("BiocParallel")
register(SnowParam(2, type = "SOCK"))

</a></code></pre>
</td>
<td>
<pre><code class="r"><a href="https://BiocParallel.FutureParam.futureverse.org">library("BiocParallel.FutureParam")
register(FutureParam())
plan(multisession, workers = 2)
</a></code></pre>
</td>
</tr>
<tr style="vertical-align: center;">
<td>
<pre><code class="r"><a href="https://github.com/Bioconductor/BiocParallel">library("BiocParallel")
cl &lt;- parallel::makeCluster(2, type = "SOCK")
register(as(cl, "SnowParam"))

</a></code></pre>
</td>
<td>
<pre><code class="r"><a href="https://BiocParallel.FutureParam.futureverse.org">library("BiocParallel.FutureParam")
register(FutureParam())
cl &lt;- parallel::makeCluster(2, type = "SOCK")
plan(cluster, workers = cl)
</a></code></pre>
</td>
</tr>
<tr style="vertical-align: center;">
<td>
<pre><code class="r"><a href="https://github.com/Bioconductor/BiocParallel">library("BiocParallel")
register(SnowParam(4, type = "MPI"))


</a></code></pre>
</td>
<td>
<pre><code class="r"><a href="https://BiocParallel.FutureParam.futureverse.org">library("BiocParallel.FutureParam")
register(FutureParam())
cl &lt;- parallel::makeCluster(4, type = "MPI")
plan(cluster, workers = cl)
</a></code></pre>
</td>
</tr>
<tr style="vertical-align: center;">
<td>
<pre><code class="r"><a href="https://github.com/Bioconductor/BiocParallel">library("BiocParallel")
register(BatchtoolsParam(cluster="sge",
                         template="~/sge.tmpl"))
</a></code></pre>
</td>
<td>
<pre><code class="r"><a href="https://BiocParallel.FutureParam.futureverse.org">library("BiocParallel.FutureParam")
register(FutureParam())
plan(future.batchtools::batchtools_sge,
     template = "~/sge.tmpl")
</a></code></pre>
</td>
</tr>
<tr style="vertical-align: center;">
<td>
N/A
</td>
<td>
<pre><code class="r"><a href="https://BiocParallel.FutureParam.futureverse.org">library("BiocParallel.FutureParam")
register(FutureParam())
plan(future.callr::callr)
</a></code></pre>
</td>
</tr>
</table>
</div>
<div id="something-not-working" class="section level2">
<h2 class="hasAnchor">
<a href="#something-not-working" class="anchor"></a>Something not working?</h2>
<p>Please note that this package, <strong>BiocParallel.FutureParam</strong>, is in an experimental stage and does not get as much real-world use as other <strong>BiocParallel</strong> backends. Thus, if you run into a problem when using this package, it could very well be a bug. However, before you report the problem, please try with the <strong><a href="https://cran.r-project.org/package=doFuture">doFuture</a></strong>, <code><a href="https://doFuture.futureverse.org/reference/registerDoFuture.html">registerDoFuture()</a></code>, and the <code><a href="https://rdrr.io/pkg/BiocParallel/man/DoparParam-class.html">DoparParam()</a></code> backend of <strong>BiocParallel</strong>, e.g.</p>
<div class="sourceCode"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/Bioconductor/BiocParallel">"BiocParallel"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://doFuture.futureverse.org">"doFuture"</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/BiocParallel/man/register.html">register</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/BiocParallel/man/DoparParam-class.html">DoparParam</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="co">## Tell BiocParallel to use a foreach backend</span>
<span class="fu"><a href="https://doFuture.futureverse.org/reference/registerDoFuture.html">registerDoFuture</a></span><span class="op">(</span><span class="op">)</span>     <span class="co">## Tell foreach to use a future backend</span>
<span class="fu">plan</span><span class="op">(</span><span class="va">multicore</span><span class="op">)</span>        <span class="co">## Tell future to use the multicore backend</span>

<span class="va">mu</span> <span class="op">&lt;-</span> <span class="fl">1.0</span>
<span class="va">sigma</span> <span class="op">&lt;-</span> <span class="fl">2.0</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/BiocParallel/man/bplapply.html">bplapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, mu <span class="op">=</span> <span class="va">mu</span>, sigma <span class="op">=</span> <span class="va">sigma</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span>, <span class="va">mu</span>, <span class="va">sigma</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="va">i</span>, mean <span class="op">=</span> <span class="va">mu</span>, sd <span class="op">=</span> <span class="va">sigma</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span></code></pre></div>
<p>If that works, but not with <code><a href="https://rdrr.io/pkg/BiocParallel/man/register.html">register(FutureParam())</a></code>, then it's a bug in the <strong>BiocParallel.FutureParam</strong> package. Please report this at <a href="https://github.com/HenrikBengtsson/BiocParallel.FutureParam/issues" class="uri">https://github.com/HenrikBengtsson/BiocParallel.FutureParam/issues</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Henrik Bengtsson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1 and <a href="https://github.com/HenrikBengtsson/pkgdown.extras/">pkgdown.extras</a> 0.0.0.9002.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'aa6e02fc501886fb0f7c91ac4e300456',
    indexName: 'futureverse',
    algoliaOptions: { 'facetFilters': ['project:BiocParallel.FutureParam'] },
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
